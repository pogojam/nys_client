{"ast":null,"code":"import _taggedTemplateLiteral from \"@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/ryanbreaux/Projects/Web/Clients/nps_v2/lib/interface/withAuth.js\";\n\nvar __jsx = React.createElement;\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  query {\\n    getUser {\\n      firstName\\n      lastName\\n      email\\n      homePhone\\n      workPhone\\n      players {\\n        id\\n        name\\n      }\\n      role\\n    }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { Children } from \"react\";\nimport { useQuery } from \"@apollo/react-hooks\";\nimport gql from \"graphql-tag\";\nvar QUERY = gql(_templateObject());\n\nvar withAuth = function withAuth(AuthComponent, _ref) {\n  var _ref$redirect = _ref.redirect,\n      redirect = _ref$redirect === void 0 ? null : _ref$redirect;\n  return function (_ref2) {\n    var children = _ref2.children;\n\n    var _useQuery = useQuery(QUERY),\n        client = _useQuery.client,\n        loading = _useQuery.loading,\n        data = _useQuery.data,\n        err = _useQuery.err;\n\n    if (loading) return \"loading...\";\n    if (err) return err;\n    var user = data.getUser ? data.getUser : null;\n\n    if (redirect && !user) {\n      return redirect;\n    } else {\n      return __jsx(AuthComponent, {\n        client: client,\n        children: children,\n        user: user,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 30,\n          columnNumber: 12\n        }\n      });\n    }\n  };\n};\n\nexport default withAuth;","map":{"version":3,"sources":["/Users/ryanbreaux/Projects/Web/Clients/nps_v2/lib/interface/withAuth.js"],"names":["React","Children","useQuery","gql","QUERY","withAuth","AuthComponent","redirect","children","client","loading","data","err","user","getUser"],"mappings":";;;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,QAAT,QAAyB,qBAAzB;AACA,OAAOC,GAAP,MAAgB,aAAhB;AAEA,IAAMC,KAAK,GAAGD,GAAH,mBAAX;;AAiBA,IAAME,QAAQ,GAAG,SAAXA,QAAW,CAACC,aAAD;AAAA,2BAAkBC,QAAlB;AAAA,MAAkBA,QAAlB,8BAA6B,IAA7B;AAAA,SAAwC,iBAAkB;AAAA,QAAfC,QAAe,SAAfA,QAAe;;AAAA,oBAClCN,QAAQ,CAACE,KAAD,CAD0B;AAAA,QACjEK,MADiE,aACjEA,MADiE;AAAA,QACzDC,OADyD,aACzDA,OADyD;AAAA,QAChDC,IADgD,aAChDA,IADgD;AAAA,QAC1CC,GAD0C,aAC1CA,GAD0C;;AAEzE,QAAIF,OAAJ,EAAa,OAAO,YAAP;AACb,QAAIE,GAAJ,EAAS,OAAOA,GAAP;AACT,QAAMC,IAAI,GAAGF,IAAI,CAACG,OAAL,GAAeH,IAAI,CAACG,OAApB,GAA8B,IAA3C;;AACA,QAAIP,QAAQ,IAAI,CAACM,IAAjB,EAAuB;AACrB,aAAON,QAAP;AACD,KAFD,MAEO;AACL,aAAO,MAAC,aAAD;AAAe,QAAA,MAAM,EAAEE,MAAvB;AAA+B,QAAA,QAAQ,EAAED,QAAzC;AAAmD,QAAA,IAAI,EAAEK,IAAzD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAP;AACD;AACF,GAVgB;AAAA,CAAjB;;AAYA,eAAeR,QAAf","sourcesContent":["import React, { Children } from \"react\";\nimport { useQuery } from \"@apollo/react-hooks\";\nimport gql from \"graphql-tag\";\n\nconst QUERY = gql`\n  query {\n    getUser {\n      firstName\n      lastName\n      email\n      homePhone\n      workPhone\n      players {\n        id\n        name\n      }\n      role\n    }\n  }\n`;\n\nconst withAuth = (AuthComponent, { redirect = null }) => ({ children }) => {\n  const { client, loading, data, err } = useQuery(QUERY);\n  if (loading) return \"loading...\";\n  if (err) return err;\n  const user = data.getUser ? data.getUser : null;\n  if (redirect && !user) {\n    return redirect;\n  } else {\n    return <AuthComponent client={client} children={children} user={user} />;\n  }\n};\n\nexport default withAuth;\n"]},"metadata":{},"sourceType":"module"}