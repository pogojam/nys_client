{"ast":null,"code":"var _jsxFileName = \"/Users/ryanbreaux/Projects/Web/Clients/nps_v2/lib/interface/withAuth.js\";\nvar __jsx = React.createElement;\nimport React, { Children } from \"react\";\nimport { useQuery } from \"@apollo/react-hooks\";\nimport gql from \"graphql-tag\";\nconst QUERY = gql`\n  query {\n    getUser {\n      firstName\n      lastName\n      email\n      homePhone\n      workPhone\n      players {\n        id\n        name\n      }\n      role\n    }\n  }\n`;\n\nconst withAuth = (AuthComponent, {\n  redirect\n}) => ({\n  children\n}) => {\n  const {\n    client,\n    loading,\n    data,\n    err\n  } = useQuery(QUERY);\n  if (loading) return \"loading...\";\n  if (err) return err;\n  const user = data.getUser ? data.getUser : null;\n\n  if (redirect && !user) {\n    return redirect;\n  } else {\n    return __jsx(AuthComponent, {\n      client: client,\n      children: children,\n      user: user,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 30,\n        columnNumber: 12\n      }\n    });\n  }\n};\n\nexport default withAuth;","map":{"version":3,"sources":["/Users/ryanbreaux/Projects/Web/Clients/nps_v2/lib/interface/withAuth.js"],"names":["React","Children","useQuery","gql","QUERY","withAuth","AuthComponent","redirect","children","client","loading","data","err","user","getUser"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,QAAT,QAAyB,qBAAzB;AACA,OAAOC,GAAP,MAAgB,aAAhB;AAEA,MAAMC,KAAK,GAAGD,GAAI;;;;;;;;;;;;;;;CAAlB;;AAiBA,MAAME,QAAQ,GAAG,CAACC,aAAD,EAAgB;AAAEC,EAAAA;AAAF,CAAhB,KAAiC,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAkB;AAClE,QAAM;AAAEC,IAAAA,MAAF;AAAUC,IAAAA,OAAV;AAAmBC,IAAAA,IAAnB;AAAyBC,IAAAA;AAAzB,MAAiCV,QAAQ,CAACE,KAAD,CAA/C;AACA,MAAIM,OAAJ,EAAa,OAAO,YAAP;AACb,MAAIE,GAAJ,EAAS,OAAOA,GAAP;AACT,QAAMC,IAAI,GAAGF,IAAI,CAACG,OAAL,GAAeH,IAAI,CAACG,OAApB,GAA8B,IAA3C;;AACA,MAAIP,QAAQ,IAAI,CAACM,IAAjB,EAAuB;AACrB,WAAON,QAAP;AACD,GAFD,MAEO;AACL,WAAO,MAAC,aAAD;AAAe,MAAA,MAAM,EAAEE,MAAvB;AAA+B,MAAA,QAAQ,EAAED,QAAzC;AAAmD,MAAA,IAAI,EAAEK,IAAzD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AACD;AACF,CAVD;;AAYA,eAAeR,QAAf","sourcesContent":["import React, { Children } from \"react\";\nimport { useQuery } from \"@apollo/react-hooks\";\nimport gql from \"graphql-tag\";\n\nconst QUERY = gql`\n  query {\n    getUser {\n      firstName\n      lastName\n      email\n      homePhone\n      workPhone\n      players {\n        id\n        name\n      }\n      role\n    }\n  }\n`;\n\nconst withAuth = (AuthComponent, { redirect }) => ({ children }) => {\n  const { client, loading, data, err } = useQuery(QUERY);\n  if (loading) return \"loading...\";\n  if (err) return err;\n  const user = data.getUser ? data.getUser : null;\n  if (redirect && !user) {\n    return redirect;\n  } else {\n    return <AuthComponent client={client} children={children} user={user} />;\n  }\n};\n\nexport default withAuth;\n"]},"metadata":{},"sourceType":"module"}